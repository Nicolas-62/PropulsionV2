{% extends 'frontoffice/_components/layout.html.twig' %}

{% block javascripts %}
    <script>
        let activeFooter = null;

        function showContent(entry, footer) {
            // Cacher tous les contenus
            let contentDivs = document.getElementsByClassName('content')[0].children;
            for (let i = 0; i < contentDivs.length; i++) {
                contentDivs[i].classList.add('hidden');
            }

            // Cacher le footer actuellement actif
            if (activeFooter) {
                activeFooter.classList.add('hidden');
            }

            // Afficher le contenu correspondant à l'entrée sélectionnée
            let selectedContent = document.getElementById(entry);
            selectedContent.classList.remove('hidden');

            // Afficher le footer correspondant à l'entrée sélectionnée
            let selectedFooter = document.getElementById(footer);
            selectedFooter.classList.remove('hidden');

            // Mettre à jour le footer actif
            activeFooter = selectedFooter;



            // Move the blue dot to the selected menu item
            const menuItems = document.getElementsByClassName('menu-item');
            for (let i = 0; i < menuItems.length; i++) {
                menuItems[i].classList.remove('active');
                const blueDot = document.getElementById('blue-dot' + i);
                console.log(blueDot);
                blueDot.style.visibility = 'hidden'; // Hide all blue dots first
            }

            const selectedMenuItem = document.querySelector('.menu-item[data-entry="' + entry + '"]');
            selectedMenuItem.classList.add('active');
            const selectedBlueDot = document.getElementById('blue-dot' + selectedMenuItem.dataset.index);
        }

        // On page load, show "footer0" as the active footer
        document.addEventListener("DOMContentLoaded", function () {
            showContent('entry1', 'footer0');
        });
    </script>
{% endblock %}
{% block body %}

    <div class="p-5">
        <div class="row">
            <div class="col-lg-3 col-md-12 p-5 menu text-md-center text-sm-center">
                <div class="row">
                    <div class="col-lg-10 col-md-12">
                        {% for sous_categorie_infos in sous_categories_infos %}
                            {{ sous_categorie_infos.getDatas(locale) }}
                            <div class="h1 py-3 menu-item {% if active_entry == 'entry' ~ loop.index %}active{% endif %}" data-entry="entry{{ loop.index }}" onclick="showContent('entry{{ loop.index }}', 'footer{{ loop.index0 }}')">
                                {{ sous_categorie_infos.title | upper}}
                            </div>
                            <div id="blue-dot{{ loop.index0 }}" class="blue-dot"></div>
                        {% endfor %}
                    </div>
                    <div class="col-2 d-sm-none d-md-none d-lg-block">
                        <img src="{{ asset(('build/maquette/images/SOUTIENS_MENU.png')) }}" class="">
                    </div>
                </div>
            </div>

            <!-- Contenu -->
            <!-- TODO Dynamiser tout cela -->
            <!--  NOUS CONTACTER -->
            <div class="content col-lg-9 col-md-12">
                <div id="entry1" class="py-5 px-5" >
                    <div class="row">
                        <div class="col-lg-2 col-md-3">
                            <img src="{{ asset(('build/maquette/images/arrow_contact.png')) }}" class="">

                        </div>

                        <div class="col-3 h3">
                            {{ cat_contact.getDatas(locale) }}
                            {{ cat_contact.description | raw }}
                        </div>
                    </div>

                    <div class="fs-3">

                        {{ cat_contact.content | raw }}
                    </div>


                    <h1 class="">NOUS ÉCRIRE</h1>
                    <!-- Formulaire -->
                    <form class="h4"  method="post" action="{{ path('fo_infos_contact') }}" >

                        <div class="form-group py-2">
                            <label class="pb-2" for="exampleFormControlSelect1">{{ field_label(form.subject) }} (obligatoire)</label>
                            <select class="form-control rounded-0 border-secondary fs-2 select-infos"  name="{{ field_name(form.subject) }}" id="exampleFormControlSelect1">
                                <option>Sélectionner ...</option>
                                {% for value, subject in field_choices(form.subject) %}
                                    <option value="{{ value }}">{{ subject }}</option>
                                {% endfor %}
                            </select>
                            {{ form_errors(form.subject) }}
                        </div>

                        <div class="form-group py-4">
                            <label class="pb-2" for="mailInput">{{ field_label(form.email) }} (obligatoire)</label>
                            <input type="email" class="form-control rounded-0 border-secondary select-infos"  name="{{ field_name(form.email) }}"  value="{{ field_value(form.email) }}" id="mailInput" aria-describedby="emailHelp">
                            {{ form_errors(form.email) }}

                        </div>
                        <div class="form-group py-4">
                            <label class="pb-2" for="nomInput">{{ field_label(form.name) }} (obligatoire)</label>
                            <input type="text" class="form-control rounded-0 border-secondary select-infos"  name="{{ field_name(form.name) }}" value="{{ field_value(form.email) }}" id="nomInput">
                            {{ form_errors(form.name) }}

                        </div>
                        <div class="form-group py-4">
                            <label class="pb-2" for="messageInput">{{ field_label(form.message) }} (obligatoire)</label>
                            <textarea class="form-control  rounded-0 border-secondary"  name="{{ field_name(form.message) }}" style="min-height: 348px" id="messageInput" rows="3">{{ field_value(form.message) }}</textarea>
                            {{ form_errors(form.message) }}
                        </div>
                        <!-- Checkbox -->
                        <div class="form-check py-4">
                            <input class="form-check-input  rounded-0 border-secondary"  name="{{ field_name(form.getNewsletter) }}" type="checkbox" value="{{ field_value(form.getNewsletter) }}" id="newsCheck">
                            <label class="pb-2" class="form-check-label" for="newsCheck">
                                {{ field_label(form.getNewsletter) }}
                            </label>
                        </div>
                        {{ form_row(form._token) }}
                        <!-- Submit -->
                        <div class="py-4">
                            <button type="submit" class="btn border border-secondary rounded-0 p-3 fs-3"><div class="p-2">ENVOYER</div></button>
                        </div>
                        <p>
                            En cliquant sur "Envoyer", vous acceptez de fournir les informations permettant qu'une réponse vous soit délivrée et que votre demande soit traitée. En indiquant votre adresse email, et en cochant la ou les cases associées, vous consentez à recevoir nos lettres d'information par voie électronique. Vous pouvez vous désinscrire à tout moment via les liens de désinscription ou en nous contactant.

                        </p>
                        <p>Pour en savoir plus, consultez notre Politique de confidentialité.</p>
                    </form>
                </div>




                <!-- COMMENT VENIR -->
                <div id="entry2"  class="py-5 px-5 hidden">

                    <div class="row">
                        <div class="col-lg-2 col-md-3">


                            <img src="{{ asset(('build/maquette/images/point_venir.png')) }}" class="">
                        </div>

                        <div class="col-3 h3">


                                {{ cat_comment_venir.getDatas(locale) }}
                                {{ cat_comment_venir.description | raw }}
                        </div>
                    </div>
                    <div class="fs-3">
                        {{ cat_comment_venir.content | raw }}
                    </div>



                </div>

                <!-- TARIFS ET BILLETTERIE -->

                <div id="entry3" class="py-5 px-5 hidden ">
                    {{ article_adress_billetterie.getDatas(locale) }}

                    <div class="row pb-5">
                        <div class="col-lg-2 col-md-3">
                            {% set media = article_adress_billetterie.getMedia(15) %}
                            {% if media is not null %}
                            {% set url = '/assets/images/' ~ media.media %}
                            <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style="object-fit: cover; max-height: 35vh;" alt="...">
                            {% endif  %}

                        </div>
                        <div class="col-5 fs-3">

                            {{ article_adress_billetterie.description | raw }}
                        </div>
                    </div>

                    <div>
                        <h1 class="py-5">{{ article_contact_billetterie.getDatas(locale) }}

                            {{ article_contact_billetterie.subtitle  }}
                        </h1>
                        {{ article_contact_billetterie.getDatas(locale) }}

                        <div class="row">
                            <div class="col-lg-2 col-md-3">


                                {% set media = article_contact_billetterie.getMedia(15) %}
                                {% if media is not null %}
                                    {% set url = '/assets/images/' ~ media.media %}
                                    <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style="object-fit: cover; max-height: 35vh;" alt="...">
                                {% endif  %}                            </div>
                            <div class="col-5 fs-3">

                                {{ article_contact_billetterie.description | raw }}

                            </div>

                        </div>
                        <div class="h2 pt-4 pb-5">
                            {{ article_contact_billetterie.content | raw }}
                        </div>


                        <div class="fs-3">
                            {{ article_abonnement_billetterie.getDatas(locale) }}
                            {{ article_abonnement_billetterie.description | raw }}
                        </div>

                        <div class="row pt-4">
                            <div class="col-5">
                                {% set media = article_abonnement_billetterie.getMedia(15) %}
                                {% if media is not null %}
                                    {% set url = '/assets/images/' ~ media.media %}
                                    <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style="object-fit: cover; max-height: 35vh;" alt="...">
                                {% endif  %}

                            </div>

                            <div class="col-7 h3">
                                {{ article_abonnement_billetterie.content | raw }}
                            </div>
                        </div>

                        <p class="fs-3">Abonnez-vous à la billetterie les soirs de concerts ou à la billetterie de La Lune des Pirates ou en ligne en remplissant ce formulaire :</p>

                        <h1>INFORMATIONS PERSONNELLES</h1>


                        <!-- FORMULAIRE -->
                        <form>
                            <div class="row h3">
                                <!-- Abonnement -->
                                <div class="col-12 ">

                                    <div class="form-group py-4">
                                        <label for="exampleFormControlSelect1">Abonnement | Renouvellement (obligatoire)</label>
                                        <select class="form-control rounded-0 border-secondary select-infos" id="exampleFormControlSelect1">
                                            <option>Sélectionner ...</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </div>

                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="nameInput">Nom (obligatoire)</label>
                                        <input type="text" class="form-control rounded-0 border-secondary select-infos" id="nameInput">
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="lastnameInput">Prénom (obligatoire)</label>
                                        <input type="text" class="form-control rounded-0 border-secondary select-infos" id="lastnameInput">
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="exampleFormControlSelect1">Genre (obligatoire)</label>
                                        <select class="form-control rounded-0 border-secondary select-infos" id="exampleFormControlSelect1">
                                            <option>Sélectionner ...</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="exampleFormControlSelect1">Tarif (obligatoire)</label>
                                        <select class="form-control rounded-0 border-secondary select-infos" id="exampleFormControlSelect1">
                                            <option>Sélectionner ...</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="dateInput">Date de naissance(obligatoire)</label>
                                        <input type="date" class="form-control rounded-0 border-secondary select-infos" id="dateInput">
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="telInput">Téléphone (obligatoire)</label>
                                        <input type="tel" class="form-control rounded-0 border-secondary select-infos" id="telInput" placeholder="XX XX XX XX XX">
                                    </div>
                                </div>
                                <hr class="py-3">
                                <h1>COORDONNÉES</h1>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="lastnameInput">Adresse (obligatoire)</label>
                                        <input type="text" class="form-control rounded-0 border-secondary select-infos" id="lastnameInput">
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="lastnameInput">Adresse 2 (obligatoire)</label>
                                        <input type="text" class="form-control rounded-0 border-secondary select-infos" id="lastnameInput">
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="lastnameInput">Code Postal (obligatoire)</label>
                                        <input type="text" class="form-control rounded-0 border-secondary select-infos" id="lastnameInput">
                                    </div>
                                </div>
                                <div class="col-6">

                                    <div class="form-group py-4">
                                        <label for="lastnameInput">Ville (obligatoire)</label>
                                        <input type="text" class="form-control rounded-0 border-secondary select-infos" id="lastnameInput">
                                    </div>
                                </div>
                                <div class="col-6 pb-3">


                                    <div class="form-group py-4">
                                        <label for="exampleFormControlSelect1">Pays (obligatoire)</label>
                                        <select class="form-control rounded-0 border-secondary select-infos" id="exampleFormControlSelect1">
                                            <option>Sélectionner ...</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                        </select>
                                    </div>
                                </div>
                                <hr class="py-3">
                                <!-- NEWSLETTER -->
                                <div class="form-check py-4 px-1">
                                    <input class="form-check-input  rounded-0 border-secondary" type="checkbox" value="" id="newsCheck">
                                    <label class="form-check-label" for="newsCheck">
                                        Je souhaite recevoir la Newsletter de La Lune
                                    </label>
                                </div>

                                <!-- ENVOYER -->
                                <button type="submit" class="btn border border-secondary rounded-0 py-1 fs-2">ENREGISTRER</button>

                                <p class="pt-5">En cliquant sur "Enregistrer", vous acceptez de fournir les informations permettant de procéder à votre achat. En indiquant vos infor- mations personnelles, et en cochant la ou les cases associées, vous consentez à recevoir nos lettres d'information par voie électro- nique. Vous pouvez vous désinscrire à tout moment via les liens de désinscription ou en nous contactant.</p>
                                <p class="pt-1">Pour en savoir plus, consultez notre Politique de confidentialité et nos conditions générales de vente.</p>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- QUESTIONS -->

                <div id="entry4" class="py-5 px-5 hidden"><div class="accordion accordion-flush" id="accordionFlushExample">
                        {% for question in question_infos %}
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed fs-2" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-{{ loop.index }}" aria-expanded="false" aria-controls="flush-collapse-{{ loop.index }}">
                                        {{ question.title }}
                                    </button>
                                </h2>
                                <div id="flush-collapse-{{ loop.index }}" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                                    <div class="accordion-body fs-3"> {{ question.description | raw}}</div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>



                </div>
            </div>
        </div>
    </div>




    <!-- BAS CONTACT -->
    <div id="footer0" class="bg-grey">
        <div class="py-5 px-5">
            <div class="row">

                <!-- Les Pirates -->
                <div class="col-md-12 col-lg-9 offset-lg-3">
                    <!-- LOGO LUNE DES PIRATES -->


                    <h1 class="pb-5"><img src="{{ asset(('build/maquette/images/MINI_LOGO.png')) }}" class="">Les Pirates</h1>
                    <div class="row">
                        <div class="col-8">
                            <div class="row">
                                {% for contact in contact_contact %}
                                    <div class="col-6 py-2">
                                        <p class="h2">{{ contact.title }}</p>
                                        <div class="h4">{{ contact.description | raw}}</div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>


                        <!-- L'équipe technique / Bénévoles -->
                        <div class="col-4">

                            <h2>L'ÉQUIPE TECHNIQUE</h2>
                            <p class="h3 pb-5">

                                {% for membre_tech in equipe_tech_contact %}
                                    {{ membre_tech.title }}{% if loop.index != equipe_tech_contact | length %},{% endif %}
                                {% endfor %} ...
                            </p>

                            <h2 class="pt-5">MERCI AUX BÉNÉVOLES !</h2>
                            <p class="h3">
                                {% for benevole in benevoles_contact %}
                                    {{ benevole.title }}{% if loop.index != benevoles_contact | length %},{% endif %}
                                {% endfor %} ...
                            </p>
                        </div>
                    </div>

                </div>



            </div>

        </div>
    </div>



    <!-- BAS COMMENT VENIR -->
    <div id="footer1" class="hidden bg-grey">
        <div class="py-5 px-5">
            <div class="row">
                <div class="col-lg-9 col-md-12">
                    {% for article_comment_venir in articles_comment_venir %}
                        {{ article_comment_venir.getDatas(locale) }}
                        <div class="row">
                            <div class="col-lg-2 offset-lg-4 col-md-3">
                                {% set media = article_comment_venir.getMedia(13) %}

                                {% if media is not null %}
                                    {% set url = '/assets/images/' ~ media.media %}
                                    <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style=" max-height: 150px;max-width: 150px" alt="...">
                                {% endif  %}
                            </div>
                            <div class="col-lg-6 col-md-9 py-5">
                                <h1 class="py-2">{{ article_comment_venir.title }}</h1>
                                <div class="fs-3">{{ article_comment_venir.description | raw }}</div>
                            </div>

                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- PLAN -->

        <a href="https://www.google.fr/maps/place/17+Quai+Belu,+80000+Amiens/@49.8964876,2.3023015,17z/data=!3m1!4b1!4m6!3m5!1s0x47e7843770099b73:0x65a4335dc8d72f5b!8m2!3d49.8964876!4d2.3048764!16s%2Fg%2F11cs8245jj?entry=ttu"><img src="{{ asset('build/maquette/images/PLAN.png') }}" class="w-100"></a>
    </div>

    <!-- BILLETTERIE BAS -->
    <div id="footer2" class="hidden">
        <div class="py-5 px-5 bg-grey">
            <div class="row">
                <div class="col-3">

                </div>
                <div class="col-lg-9 col-md-12">

                    <div class="row">
                        <div class="col-12">
                            {{ article_tarif_etudiant_billetterie.getDatas(locale) }}
                            <div class="h1">{{ article_tarif_etudiant_billetterie.title }}</div>
                            <div class="h2">{{article_tarif_etudiant_billetterie.description | raw}}</div>
                        </div>
                        <!-- Image tarifs -->
                        <div class="col-1">
                            {% set media = article_tarif_etudiant_billetterie.getMedia(15) %}
                            {% if media is not null %}
                                {% set url = '/assets/images/' ~ media.media %}
                                <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style="max-height: 100px" alt="...">
                            {% endif  %}



                        </div>
                        <div class="col-11 h2">
                            {{article_tarif_etudiant_billetterie.content | raw}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">

            <div class="col-lg-9 offset-lg-3 col-md-12">
                {{ article_pass_billetterie.getDatas(locale) }}
                <div class="py-5 px-5 h2">
                    <h1 class="pb-2">{{ article_pass_billetterie.title }}</h1>
                    <div class="h2">
                        {{ article_pass_billetterie.description | raw }}
                    </div>

                    <div class="row pt-2">
                        <div class="col-6">
                            {% set media = article_pass_billetterie.getMedia(15) %}
                            {% if media is not null %}
                                {% set url = '/assets/images/' ~ media.media %}
                                <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style="max-height: 200px" alt="...">
                            {% endif  %}
                        </div>
                        <div class="col-6">
                            {% set media = article_pass_billetterie.getMedia(16) %}
                            {% if media is not null %}
                                {% set url = '/assets/images/' ~ media.media %}
                                <img src="{{ asset((url)) }}" class="card-img-top rounded-0" style="max-height: 200px" alt="...">
                            {% endif  %}
                        </div>


                    </div>


                </div>
            </div>
        </div>
    </div>

    <div id="footer3" class="hidden">

    </div>


{% endblock %}
