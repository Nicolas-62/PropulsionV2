{% extends 'frontoffice/_components/layout.html.twig' %}

{% block body %}
    {{ article.getDatas(locale) }}
    <!-- IMAGE DU HAUT -->
    <div class="row shadow-lg" >
        <div class="col-lg-8 col-md-12 p-0" style="">
            {% set media = article.getMedia(9) %}
            {% set media = article.getMedia(9) %}
            {% set category = article.category %}
            {{ category.getDatas(locale) }}
            {% if media is not null %}
                {% set url = '/assets/images/' ~ media.media %}
                <img src="{{ asset((url)) }}" class="rounded-0 w-100 img-fluid"   alt="...">
            {% else %}
                <img src="{{ asset(('build/front/images/PLACE_HOLDER_PAYSAGE.jpg')) }}" class="rounded-0 w-100 img-fluid"  alt="...">
            {% endif %}
        </div>
        <!-- BILLETTERIE AU DESSUS DE L'IMAGE -->
        <div class="col-lg-4 col-md-12" style="z-index: 600">
            <div class="col-12 pb-3">
                <div class="row text-center h3">
                    <div
                            class="col-3 theme-1"
                            style="background-color:{{ article.category.themeBackColor }};color: {{ article.themeTextColor }};"
                    >
                        {{ category.title|upper }}
                    </div>
                    <div class="col-9 text-uppercase white justify-content-start" style="background-color: black;min-height: 50px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 22px"><img class="" style="width: 30px; padding-right: 5px;" src="{{ asset(('build/maquette/images/MINI_BILLETTERIE.svg')) }}">POP FRANçAISE</div>
                </div>
            </div>
            <div class="card-container" >
                <!-- Titre -->
                <div class="lh-1 pt-3">
                    <p class="fs-1 mb-0">{{ article.title }}</p>
                    <p class="fs-2 mt-0">{{ article.subtitle }}</p>
                </div>
                <!-- Date -->
                <div style="padding-bottom: 20px; padding-top: 20px">
                    <div style="font-size: 30px; font-weight: bold" class="mb-0">
                        {{ formatCustomDate(article.dateEvent) }}<br>
                        {% if article.datetimeEvent is not empty and article.datetimeEvent is not null %}
                            {{ article.datetimeEvent| date("H:i") }}
                        {% endif %}
                    </div>
                </div>
                <!-- Bouton ajout panier -->
                <div class="pt-2 pb-5">
                    <div class="row  h3">
                        <div class="col-6">
                            <div class="fs-5">Tarif normal</div>
                            <div class="row fs-4">
                                <div class="col-6 " style="padding-right: 0px; ">
                                    <div class="border border-1 border-dark p-2 w-100" style="background-color: #e6e6e6">12 €</div>
                                </div>
                                <div class="col-6" style="padding-left: 0px">
                                    <select class="w-100 p-1">
                                        <option>0</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="fs-5">Tarif abonné</div>
                            <div class="row fs-4">
                                <div class="col-6" style="padding-right: 0px;">
                                    <div class="border   border-1 border-dark p-2 w-100" style="background-color: #e6e6e6">12 €</div>
                                </div>
                                <div class="col-6" style="padding-left: 0px">
                                    <select class="w-100 p-1">
                                        <option>0</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn-read-card">AJOUTER AU PANIER</button>
                </div>
                <!-- Cartes Lunes -->
                <div class="row">
                    <div class="col-6">
                        <img class="" style="max-height: 50px" src="{{ asset('build/maquette/images/LUNE_ABONNE.svg') }}">
                        <div style="font-size: 14px">
                            Profitez du tarif abonné<br>
                            <b>
                                avec la carte lune
                            </b>
                        </div>
                    </div>
                    <div class="col-6">
                        <img style="max-height: 50px" src="{{ asset('build/maquette/images/LUNE_PASS_CULTURE.svg') }}">
                        <div style="font-size: 14px">
                            Tu as entre 15 et 18 ans ?<br>
                            <b>Dispo sur le Pass Culture</b>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- DETAIL ARTICLE -->
    <div class="p-5">
        <div class="row">
            <!-- CONTENU PARTIE GAUCHE-->
            <div class="col-lg-8 col-md-12">
                <!-- NOM GROUPE / STYLE / HORAIRE -->
                <div class="row pt-5 pb-2 align-items-end">
                    <div class="col-lg-6 col-md-12">
                        <div class="fs-1 lh-1">{{ article.title }}</div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="h4 d-flex align-items-center">{{ article.typeMusic}}  {% if article.origin != "" %} | {{ article.origin }}{% endif %}</div>
                    </div>
                    <div class="col-lg-2 col-md-6 d-flex justify-content-end">
                        {% if article.datetimeEvent is not null and article.datetimeEvent  is not empty %}
                            <div class="fs-2">{{ article.datetimeEvent| date('H:i') }}</div>
                        {% endif %}
                    </div>
                </div>
                <!-- RESUME ARTISTE -->
                <div class="fs-5 py-3" style="line-height: 1.3">
                    {{ article.description | raw }}
                </div>
                <!-- IMAGE ARTISTE -->
                {% set media2 = article.getMedia(10) %}
                {% set media3 = article.getMedia(1) %}
                {% set media4 = article.getMedia(12) %}
                <div class="">
                    {% if media2 is not null %}

                        {% set url = '/assets/images/' ~ media2.media  %}
                        <img src="{{ asset((url)) }}" class="card-img-top rounded-0" alt="...">
                    {% elseif media3 is not null %}
                        {% set url = '/assets/images/' ~ media3.media  %}
                        <img src="{{ asset((url)) }}" class="card-img-top rounded-0" alt="...">
                    {% endif %}
                </div>
                <!-- DESCRIPTION ARTISTE -->
                <div class="fs-5 py-3" style="line-height: 1.3">
                    {{ article.content | raw }}
                </div>
                <!-- VIDEO ARTISTE -->
                {% if article.youtubeLink is not null and article.youtubelink is not empty %}
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe class="embed-responsive-item w-100" style="height: 860px;" src="{{ article.youtubeLink }}" allowfullscreen></iframe>
                    </div>
                {% endif %}
                <!-- TEST PHOTO ARRONDIE -->
                <div>
                </div>
                <!-- PLUS D'INFOS SUR L'ARTISTE -->
                <div class="row py-5">
                    <div class="col-lg-8 offset-lg-4 col-md-12">
                        <div class="row justify-content-end">
                            <div class="col-6 d-flex align-items-end">
                                {% if article.instagramLink != '' or article.twitterLink != '' or article.facebookLink != '' or article.siteInternet != ''  %}
                                    <div class="fs-4">Plus d'infos sur l'artiste</div>
                                {% endif %}
                            </div>
                            <div class="col-6">
                                <!-- MEDIAS SOCIAUX -->
                                <div class="row">
                                    {% if article.instagramLink != '' %}
                                        <div class="col-3">
                                            <a href="{{ article.instagramLink }}"><img class="mh-45"  src="{{ asset('build/front/images/PICTURE.svg') }}"></a>
                                        </div>
                                    {% endif %}
                                    {% if article.twitterLink != '' %}
                                        <div class="col-3">
                                            <a href="{{ article.twitterLink }}"><img class="mh-45" src="{{ asset('build/front/images/TWITTER.svg') }}"></a>
                                        </div>
                                    {% endif %}
                                    {% if article.facebookLink != '' %}
                                        <div class="col-3">
                                            <a href="{{ article.facebookLink }}"><img class="mh-45" src="{{ asset('build/front/images/FACEBOOK.svg') }}"></a>
                                        </div>
                                    {% endif %}
                                    {% if article.siteInternet != '' %}
                                        <div class="col-3">
                                            <a href="{{ article.siteInternet }}"><img class="mh-45" src="{{ asset('build/front/images/INTERNET.svg') }}"></a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- LIENS ET INFOS PRATIQUES (PARTIE DROITE) -->
            <div class="col-lg-4 col-md-12 d-flex align-content-end justify-content-center flex-wrap text-md-center text-lg-start">
                {% if not article.getFiles is empty %}

                    <div class="p-5">
                        {% set filesArray = article.getFiles() %}
                        {% set arrayLength = filesArray|length %}
                        {% if arrayLength > 1 %}
                            <h3 class="mb-5">Fichiers liés à l'article : </h3>
                        {% elseif arrayLength == 1 %}
                            <h3 class="mb-5">Fichier lié à l'article : </h3>
                        {% endif %}
                        {% for file in article.getFiles() %}
                            {% set url_file = '/assets/images/' ~ file.media %}
                            <li class="mb-4">
                            {{ file.legend }} :
                            <a class="btn-read-card" href="{{ url_file }}" role="button">OUVRIR</a>
                            <a class="btn-read-card" href="{{ url_file }}" role="button" download>TÉLÉCHARGER</a>
                            </li>
                        {% endfor %}
                    </div>
                {% endif %}
                <div class="p-5">
                    <!-- CARTE LUNE -->
                    <div class="py-5">
                        <img style="max-height: 163px " src="{{ asset('build/maquette/images/CARTE_LUNE_BAS.svg') }}">
                        <div class="fs-5">
                            Concerts Gratuits Abonnés & Réductions<br>
                            <b> Abonnez-vous !</b>
                        </div>
                    </div>
                    <div class="py-5 h3">

                        <img style="max-height: 90px" src="{{ asset('build/maquette/images/PASS_CULTURE_BIG.svg') }}">
                        <div class="fs-5">
                            Tu as entre 15 et 18ans ?<br>
                            <b>Dispo sur le Pass Culture</b>
                        </div>
                    </div>
                    <div class="py-5">
                        <img style="max-height: 150px" src="{{ asset('build/maquette/images/INFOS_PRATIQUES.svg') }}">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- DEUXIEME PARTIE -->
    {% for child in children %}
        {{ child.getDatas(locale) }}
    <div class="bg-grey">
        <div class="p-5">
            <div class="row">
                <div class="col-lg-8 col-md-12">
                    <!-- NOM GROUPE / STYLE / HORAIRE -->
                    <div class="row py-3 align-items-end">
                        <div class="col-lg-6 col-md-12">
                            <h1 class="fs-1">{{ child.title }}</h1>
                        </div>
                        <div class="col-lg-4 col-md-8"  >
                            <h1>{{ child.typeMusic}} {% if child.origin != "" %} | {{ child.origin }}{% endif %}</h1>
                        </div>
                        <div class="col-lg-2 col-md-4 d-flex justify-content-end">
                            <div class="fs-2">{{ child.datetimeEvent | date('H:i') }}</div>
                        </div>
                    </div>
                    <!-- DESCRIPTION ARTISTE -->
                    <div class="fs-5">
                        {{ child.description | raw }}
                    </div>
                    <!-- Image Artiste -->
                    {% set media3 = child.getMedia(1) %}
                    <div class="pt-3">
                        {% if media3 is not null %}
                            {% set url = '/assets/images/' ~ media3.media  %}
                            <img src="{{ asset((url)) }}" class="card-img-top rounded-0" alt="...">
                        {% endif %}
                    </div>
                    <!-- CONTENT ARTISTE -->
                    <div class="fs-5 pb-3">
                        {{ child.content | raw }}
                    </div>
                    <!-- VIDEO ARTISTE -->
                    {% if child.youtubeLink is not empty and child.youtubeLink is not null %}
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item w-100" style="height: 860px" src="{{ child.youtubeLink }}" allowfullscreen></iframe>
                        </div>
                    {% endif %}
                    <!-- PLUS D'INFOS SUR L'ARTISTE -->
                    <div class="row">
                        <div class="col-lg-8 offset-lg-4 col-md-12 py-5">
                            <div class="row">
                                <div class="col-6 d-flex align-items-end">
                                    {% if child.instagramLink != '' or child.twitterLink != '' or child.facebookLink != '' or child.siteInternet != ''  %}
                                        <div class="fs-4">Plus d'infos sur l'artiste</div>
                                    {% endif %}
                                </div>
                                <div class="col-6">
                                    <!-- MEDIAS SOCIAUX -->
                                    <div class="row">
                                        {% if child.instagramLink != '' %}
                                            <div class="col-3">
                                                <a href="{{ child.instagramLink }}"><img class="mh-45" src="{{ asset('build/front/images/PICTURE.svg') }}"></a>
                                            </div>
                                        {% endif %}
                                        {% if child.twitterLink != '' %}
                                            <div class="col-3">
                                                <a href="{{ child.twitterLink }}"><img class="mh-45" src="{{ asset('build/front/images/TWITTER.svg') }}"></a>
                                            </div>
                                        {% endif %}
                                        {% if child.facebookLink != '' %}
                                            <div class="col-3">
                                                <a href="{{ child.facebookLink }}"><img class="mh-45" src="{{ asset('build/front/images/FACEBOOK.svg') }}"></a>
                                            </div>
                                        {% endif %}
                                        {% if child.siteInternet != '' %}
                                            <div class="col-3">
                                                <a href="{{ child.siteInternet }}"><img class="mh-45" src="{{ asset('build/front/images/INTERNET.svg') }}"></a>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12 d-flex align-content-end justify-content-center text-md-center text-lg-start flex-wrap">
                    <div class="p-5">
                        <div class="py-5" style="max-height: 140px; max-width: 266px;min-width: 265px">
                            <img src="{{ asset('build/maquette/images/INFOS_PRATIQUES.svg') }}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    <!-- A DECOUVRIR -->
    <hr>
    <div class="p-lg-5">
        <h1 class="pb-5">
            à découvrir >> >> >>
        </h1>
        <div class="row">
            {% for event in events_agenda %}
                {% if loop.index0 < 3 %}
                    {% set media = event.getMedia(1) %}
                    {% set CategoryTitle = event.category.title|replace({' ': '-'})|lower %}
                    <div class="custom-col-xxl-3 col-lg-4 col-md-12 pb-lg-5 px-lg-3 category-{{ CategoryTitle }} category-tous-les-evenements">
                        <!-- Card-Actu -->
                        {% include 'frontoffice/_components/card.html.twig' with {'event': event, 'agenda': true, 'showButton': false, 'actu': false, 'billetterie': true, 'soutiens': false } %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}