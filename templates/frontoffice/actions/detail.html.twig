{% extends 'frontoffice/_components/layout.html.twig' %}
{% block body %}
    {% do cat.getDatas(locale) %}

    <div class="wrapper">
        {% include 'frontoffice/_components/title.html.twig' with {'events': null, 'filter': false, 'historic': false, 'title': cat.title, logo: null } %}

        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
            <!-- Description de la catégorie -->
            <div class="mb-5 mt-lg-4 fs-5">
                {{ cat.description | raw }}
            </div>
            <div class="mb-5 fs-5">
                {{ cat.content | raw }}
            </div>
            <!-- Boucle sur les articles de la sous-catégorie -->
            {% for article in articles %}
                {% do article.getDatas(locale) %}
                <div class="mb-5 fs-5">

                    <!-- Média -->
                    {% set media = article.getMedia(31) %}
                    {% if media %}
                        <div class="mb-5 col">
                            <img src="{{ url('ressources_image', {'width':'src','height':'src', 'media':media.media} ) }}" alt="{{ media.legend }}" class="img-fluid w-100">
                        </div>
                    {% endif %}

                    <!-- Titre -->
                    <h2 class="text-center">{{ article.titleByLanguage }}</h2>

                    <!-- Liens Medias Sociaux -->
                    <div class="row text-center mt-5">
                        {% if article.instagramLink != '' %}
                            <div class="col">
                                <a href="{{ article.instagramLink }}"><img class="mh-45"  src="{{ asset(getSiteImagePath('PICTURE.svg')) }}"></a>
                            </div>
                        {% endif %}
                        {% if article.twitterLink != '' %}
                            <div class="col">
                                <a href="{{ article.twitterLink }}"><img class="mh-45" src="{{ asset(getSiteImagePath('TWITTER.svg')) }}"></a>
                            </div>
                        {% endif %}
                        {% if article.facebookLink != '' %}
                            <div class="col">
                                <a href="{{ article.facebookLink }}"><img class="mh-45" src="{{ asset(getSiteImagePath('FACEBOOK.svg')) }}"></a>
                            </div>
                        {% endif %}
                        {% if article.siteInternet != '' %}
                            <div class="col">
                                <a href="{{ article.siteInternet }}"><img class="mh-45" src="{{ asset(getSiteImagePath('INTERNET.svg')) }}"></a>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Description -->
                    <div class="my-5">
                        {{ article.description | raw }}
                    </div>

                    <!-- Photos de l'article -->
                    <div class="row text-center">
                        {% set media = article.getMedia(28) %}
                        {% if media %}
                            <div class="mb-5 col-md-12 col-lg-4">
                                <img src="{{ url('ressources_image', {'width':'src','height':'src', 'media':media.media} ) }}" alt="{{ media.legend }}" class="img-fluid">
                            </div>
                        {% endif %}
                        {% set media1 = article.getMedia(29) %}
                        {% if media1 %}
                            <div class="mb-5 col-md-12 col-lg-4">
                                <img src="{{ url('ressources_image', {'width':'src','height':'src', 'media':media1.media} ) }}" alt="{{ media1.legend }}" class="img-fluid">
                            </div>
                        {% endif %}
                        {% set media2 = article.getMedia(30) %}
                        {% if media2 %}
                            <div class="mb-5 col-md-12 col-lg-4">
                                <img src="{{ url('ressources_image', {'width':'src','height':'src', 'media':media2.media} ) }}" alt="{{ media2.legend }}" class="img-fluid">
                            </div>
                        {% endif %}
                    </div>

                    <!-- Contenu de l'article -->
                    <div>
                        {{ article.content | raw }}
                    </div>

                    <!-- Vidéos de l'article -->
                    <div class="row pt-4">
                        {% if article.youtubeLink %}
                            <div class="w-50">
                                <div class="video-container">
                                    <iframe src="{{ article.youtubeLink }}" allowfullscreen></iframe>
                                </div>
                            </div>
                        {% endif %}
                        {% if article.youtubeSecondLink %}
                            <div class="w-50">
                                <div class="video-container">
                                    <iframe src="{{ article.youtubeSecondLink }}" allowfullscreen></iframe>
                                </div>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Fichiers liés à l'article -->
                    <div class="row">
                        {% if not article.getFiles is empty %}
                            <div class="mt-5">
                                {% set filesArray = article.getFiles() %}
                                {% set arrayLength = filesArray|length %}
                                {% if arrayLength > 1 %}
                                    <h4 class="mb-5">Fichiers liés à l'article : </h4>
                                {% elseif arrayLength == 1 %}
                                    <h4 class="mb-5">Fichier lié à l'article : </h4>
                                {% endif %}
                                {% for file in article.getFiles() %}
                                    {% set url_file = '/assets/images/' ~ file.media %}
                                    <a class="btn-files fs-5" href="{{ url_file }}" role="button">{{ file.legend }}</a>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
