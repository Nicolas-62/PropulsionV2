{# @var ea \EasyCorp\Bundle\EasyAdminBundle\Context\AdminContext #}
{# @var field \EasyCorp\Bundle\EasyAdminBundle\Dto\FieldDto #}
{# @var entity \EasyCorp\Bundle\EasyAdminBundle\Dto\EntityDto #}
{% trans_default_domain 'EasyAdminBundle' %}

{% if ea.crud.currentAction == 'detail' or not field.customOptions.get('renderAsSwitch') %}
    <span class="badge {{ field.value == true ? 'badge-boolean-true' : 'badge-boolean-false' }}">
        {{ (field.value == true ? 'label.true' : 'label.false')|trans }}
    </span>
{% else %}
    <div class="form-check form-switch">
        <input
            type="checkbox"
            class="form-check-input"
            id="{{ field.uniqueId }}" {{ field.value == true ? 'checked' }}
            data-toggle-url="{{ field.customOptions.get('toggleUrl') }}"
            {{ entity.instance.isEtapeDisabled(field.property, user.id, is_granted('ROLE_ADMIN')) == true ? 'disabled' }}
            autocomplete="off"
            data-current-user-id="{{ user.id }}"
            {# Si l'utilisateur courant n'a pas le role administrateur #}
            {% if not is_granted('ROLE_ADMIN') %}
                {# On renseigne l'id de l'utilisateur qui a cochÃ©#}
                {% set userEtapeAttribute = 'user' ~ field.property|capitalize %}
                data-user-id="{{ attribute(entity.instance, userEtapeAttribute) }}"
            {% endif %}
        >
        <label class="form-check-label" for="{{ field.uniqueId }}"></label>
    </div>
{% endif %}
